
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - engrampa</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - engrampa: src/mkdtemp.c </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> mkdtemp.c</p>
<a href='26.html#line-124'> ConfigurationNotChecked 124</a><a href='26.html#line-125'> ConfigurationNotChecked 125</a><a href='26.html#line-126'> variableScope 126</a><a href='26.html#line-126'> unreadVariable 126</a><a href='26.html#line-141'> ConfigurationNotChecked 141</a><a href='26.html#line-157'> ConfigurationNotChecked 157</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="cm">/* Copyright (C) 1999, 2001-2002 Free Software Foundation, Inc.</span>
<a name="line-2"></a><span class="cm">   This file is part of the GNU C Library.</span>
<a name="line-3"></a>
<a name="line-4"></a><span class="cm">   The GNU C Library is free software; you can redistribute it and/or</span>
<a name="line-5"></a><span class="cm">   modify it under the terms of the GNU Library General Public License as</span>
<a name="line-6"></a><span class="cm">   published by the Free Software Foundation; either version 2 of the</span>
<a name="line-7"></a><span class="cm">   License, or (at your option) any later version.</span>
<a name="line-8"></a>
<a name="line-9"></a><span class="cm">   The GNU C Library is distributed in the hope that it will be useful,</span>
<a name="line-10"></a><span class="cm">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="line-11"></a><span class="cm">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="line-12"></a><span class="cm">   Library General Public License for more details.</span>
<a name="line-13"></a>
<a name="line-14"></a><span class="cm">   You should have received a copy of the GNU Library General Public</span>
<a name="line-15"></a><span class="cm">   License along with the GNU C Library; see the file COPYING.LIB.  If not,</span>
<a name="line-16"></a><span class="cm">   write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor,</span>
<a name="line-17"></a><span class="cm">   Boston, MA 02110-1301, USA.  */</span>
<a name="line-18"></a>
<a name="line-19"></a><span class="cm">/* Extracted from misc/mkdtemp.c and sysdeps/posix/tempname.c.  */</span>
<a name="line-20"></a>
<a name="line-21"></a><span class="cp">#ifdef HAVE_CONFIG_H</span>
<a name="line-22"></a><span class="cp"># include &quot;config.h&quot;</span>
<a name="line-23"></a><span class="cp">#endif</span>
<a name="line-24"></a>
<a name="line-25"></a><span class="cm">/* Specification.  */</span>
<a name="line-26"></a><span class="cp">#include</span> <span class="cpf">&quot;mkdtemp.h&quot;</span><span class="cp"></span>
<a name="line-27"></a>
<a name="line-28"></a><span class="cp">#include</span> <span class="cpf">&lt;errno.h&gt;</span><span class="cp"></span>
<a name="line-29"></a><span class="cp">#ifndef __set_errno</span>
<a name="line-30"></a><span class="cp"># define __set_errno(Val) errno = (Val)</span>
<a name="line-31"></a><span class="cp">#endif</span>
<a name="line-32"></a>
<a name="line-33"></a><span class="cp">#include</span> <span class="cpf">&lt;stddef.h&gt;</span><span class="cp"></span>
<a name="line-34"></a><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<a name="line-35"></a><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<a name="line-36"></a>
<a name="line-37"></a><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a name="line-38"></a><span class="cp">#ifndef TMP_MAX</span>
<a name="line-39"></a><span class="cp"># define TMP_MAX 238328</span>
<a name="line-40"></a><span class="cp">#endif</span>
<a name="line-41"></a>
<a name="line-42"></a><span class="cp">#if HAVE_STDINT_H_WITH_UINTMAX || _LIBC</span>
<a name="line-43"></a><span class="cp"># include &lt;stdint.h&gt;</span>
<a name="line-44"></a><span class="cp">#endif</span>
<a name="line-45"></a>
<a name="line-46"></a><span class="cp">#if HAVE_INTTYPES_H_WITH_UINTMAX || _LIBC</span>
<a name="line-47"></a><span class="cp"># include &lt;inttypes.h&gt;</span>
<a name="line-48"></a><span class="cp">#endif</span>
<a name="line-49"></a>
<a name="line-50"></a><span class="cp">#if HAVE_UNISTD_H || _LIBC</span>
<a name="line-51"></a><span class="cp"># include &lt;unistd.h&gt;</span>
<a name="line-52"></a><span class="cp">#endif</span>
<a name="line-53"></a>
<a name="line-54"></a><span class="cp">#if HAVE_GETTIMEOFDAY || _LIBC</span>
<a name="line-55"></a><span class="cp"># if HAVE_SYS_TIME_H || _LIBC</span>
<a name="line-56"></a><span class="cp">#  include &lt;sys/time.h&gt;</span>
<a name="line-57"></a><span class="cp"># endif</span>
<a name="line-58"></a><span class="cp">#else</span>
<a name="line-59"></a><span class="cp"># if HAVE_TIME_H || _LIBC</span>
<a name="line-60"></a><span class="cp">#  include &lt;time.h&gt;</span>
<a name="line-61"></a><span class="cp"># endif</span>
<a name="line-62"></a><span class="cp">#endif</span>
<a name="line-63"></a>
<a name="line-64"></a><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp"></span>
<a name="line-65"></a><span class="cp">#if STAT_MACROS_BROKEN</span>
<a name="line-66"></a><span class="cp"># undef S_ISDIR</span>
<a name="line-67"></a><span class="cp">#endif</span>
<a name="line-68"></a><span class="cp">#if !defined S_ISDIR &amp;&amp; defined S_IFDIR</span>
<a name="line-69"></a><span class="cp"># define S_ISDIR(mode) (((mode) &amp; S_IFMT) == S_IFDIR)</span>
<a name="line-70"></a><span class="cp">#endif</span>
<a name="line-71"></a><span class="cp">#if !S_IRUSR &amp;&amp; S_IREAD</span>
<a name="line-72"></a><span class="cp"># define S_IRUSR S_IREAD</span>
<a name="line-73"></a><span class="cp">#endif</span>
<a name="line-74"></a><span class="cp">#if !S_IRUSR</span>
<a name="line-75"></a><span class="cp"># define S_IRUSR 00400</span>
<a name="line-76"></a><span class="cp">#endif</span>
<a name="line-77"></a><span class="cp">#if !S_IWUSR &amp;&amp; S_IWRITE</span>
<a name="line-78"></a><span class="cp"># define S_IWUSR S_IWRITE</span>
<a name="line-79"></a><span class="cp">#endif</span>
<a name="line-80"></a><span class="cp">#if !S_IWUSR</span>
<a name="line-81"></a><span class="cp"># define S_IWUSR 00200</span>
<a name="line-82"></a><span class="cp">#endif</span>
<a name="line-83"></a><span class="cp">#if !S_IXUSR &amp;&amp; S_IEXEC</span>
<a name="line-84"></a><span class="cp"># define S_IXUSR S_IEXEC</span>
<a name="line-85"></a><span class="cp">#endif</span>
<a name="line-86"></a><span class="cp">#if !S_IXUSR</span>
<a name="line-87"></a><span class="cp"># define S_IXUSR 00100</span>
<a name="line-88"></a><span class="cp">#endif</span>
<a name="line-89"></a>
<a name="line-90"></a><span class="cp">#if !_LIBC</span>
<a name="line-91"></a><span class="cp"># define __getpid getpid</span>
<a name="line-92"></a><span class="cp"># define __gettimeofday gettimeofday</span>
<a name="line-93"></a><span class="cp"># define __mkdir mkdir</span>
<a name="line-94"></a><span class="cp">#endif</span>
<a name="line-95"></a>
<a name="line-96"></a><span class="cm">/* Use the widest available unsigned type if uint64_t is not</span>
<a name="line-97"></a><span class="cm">   available.  The algorithm below extracts a number less than 62**6</span>
<a name="line-98"></a><span class="cm">   (approximately 2**35.725) from uint64_t, so ancient hosts where</span>
<a name="line-99"></a><span class="cm">   uintmax_t is only 32 bits lose about 3.725 bits of randomness,</span>
<a name="line-100"></a><span class="cm">   which is better than not having mkstemp at all.  */</span>
<a name="line-101"></a><span class="cp">#if !defined UINT64_MAX &amp;&amp; !defined uint64_t</span>
<a name="line-102"></a><span class="cp"># define uint64_t uintmax_t</span>
<a name="line-103"></a><span class="cp">#endif</span>
<a name="line-104"></a>
<a name="line-105"></a><span class="cm">/* These are the characters used in temporary filenames.  */</span>
<a name="line-106"></a><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">letters</span><span class="p">[]</span> <span class="o">=</span>
<a name="line-107"></a><span class="s">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span><span class="p">;</span>
<a name="line-108"></a>
<a name="line-109"></a><span class="cm">/* Generate a temporary file name based on TMPL.  TMPL must match the</span>
<a name="line-110"></a><span class="cm">   rules for mk[s]temp (i.e. end in &quot;XXXXXX&quot;).  The name constructed</span>
<a name="line-111"></a><span class="cm">   does not exist at the time of the call to __gen_tempname.  TMPL is</span>
<a name="line-112"></a><span class="cm">   overwritten with the result.</span>
<a name="line-113"></a>
<a name="line-114"></a><span class="cm">   KIND is:</span>
<a name="line-115"></a><span class="cm">   __GT_DIR:		create a directory, which will be mode 0700.</span>
<a name="line-116"></a>
<a name="line-117"></a><span class="cm">   We use a clever algorithm to get hard-to-predict names. */</span>
<a name="line-118"></a><span class="k">static</span> <span class="kt">int</span>
<a name="line-119"></a><span class="nf">gen_tempname</span> <span class="p">(</span><span class="n">tmpl</span><span class="p">)</span>
<a name="line-120"></a>     <span class="kt">char</span> <span class="o">*</span><span class="n">tmpl</span><span class="p">;</span>
<a name="line-121"></a><span class="p">{</span>
<a name="line-122"></a>  <span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
<a name="line-123"></a>  <span class="kt">char</span> <span class="o">*</span><span class="n">XXXXXX</span><span class="p">;</span>
<a name="line-124"></a><span class="hll">  <span class="k">static</span> <span class="kt">uint64_t</span> <span class="n">value</span><span class="p">;</span><span class='error2'>&lt;--- Skipping configuration 'UINT64_MAX;uint64_t' since the value of 'uint64_t' is unknown. Use -D if you want to check it. You can use -U to skip it explicitly.</span>
</span><a name="line-125"></a><span class="hll">  <span class="kt">uint64_t</span> <span class="n">random_time_bits</span><span class="p">;</span><span class='error2'>&lt;--- Skipping configuration 'UINT64_MAX;uint64_t' since the value of 'uint64_t' is unknown. Use -D if you want to check it. You can use -U to skip it explicitly.</span>
</span><a name="line-126"></a><span class="hll">  <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="n">fd</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span><div class='verbose expandable'><span class='error2'>&lt;--- The scope of the variable 'fd' can be reduced. <span class='marker'>[+]</span></span><div class='content'>The scope of the variable &apos;fd&apos; can be reduced. Warning: Be careful when fixing this message, especially when there are inner loops. Here is an example where cppcheck will write that the scope for &apos;i&apos; can be reduced:<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
void f(int x)<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
{<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
    int i = 0;<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
    if (x) {<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
        // it&apos;s safe to move &apos;int i = 0;&apos; here<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
        for (int n = 0; n &lt; 10; ++n) {<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
            // it is possible but not safe to move &apos;int i = 0;&apos; here<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
            do_something(&amp;i);<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
        }<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
    }<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
}<span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
When you see this message it is always safe to reduce the variable scope 1 level.</div></div><span class='error2'>&lt;--- Variable 'fd' is assigned a value that is never used.</span>
</span><a name="line-127"></a>  <span class="kt">int</span> <span class="n">save_errno</span> <span class="o">=</span> <span class="n">errno</span><span class="p">;</span>
<a name="line-128"></a>
<a name="line-129"></a>  <span class="n">len</span> <span class="o">=</span> <span class="n">strlen</span> <span class="p">(</span><span class="n">tmpl</span><span class="p">);</span>
<a name="line-130"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&lt;</span> <span class="mi">6</span> <span class="o">||</span> <span class="n">strcmp</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">tmpl</span><span class="p">[</span><span class="n">len</span> <span class="o">-</span> <span class="mi">6</span><span class="p">],</span> <span class="s">&quot;XXXXXX&quot;</span><span class="p">))</span>
<a name="line-131"></a>    <span class="p">{</span>
<a name="line-132"></a>      <span class="n">__set_errno</span> <span class="p">(</span><span class="n">EINVAL</span><span class="p">);</span>
<a name="line-133"></a>      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a name="line-134"></a>    <span class="p">}</span>
<a name="line-135"></a>
<a name="line-136"></a>  <span class="cm">/* This is where the Xs start.  */</span>
<a name="line-137"></a>  <span class="n">XXXXXX</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tmpl</span><span class="p">[</span><span class="n">len</span> <span class="o">-</span> <span class="mi">6</span><span class="p">];</span>
<a name="line-138"></a>
<a name="line-139"></a>  <span class="cm">/* Get some more or less random data.  */</span>
<a name="line-140"></a><span class="cp">#ifdef RANDOM_BITS</span>
<a name="line-141"></a><span class="hll">  <span class="n">RANDOM_BITS</span> <span class="p">(</span><span class="n">random_time_bits</span><span class="p">);</span><span class='error2'>&lt;--- Skipping configuration 'RANDOM_BITS' since the value of 'RANDOM_BITS' is unknown. Use -D if you want to check it. You can use -U to skip it explicitly.</span>
</span><a name="line-142"></a><span class="cp">#else</span>
<a name="line-143"></a><span class="cp"># if HAVE_GETTIMEOFDAY || _LIBC</span>
<a name="line-144"></a>  <span class="p">{</span>
<a name="line-145"></a>    <span class="k">struct</span> <span class="n">timeval</span> <span class="n">tv</span><span class="p">;</span>
<a name="line-146"></a>    <span class="n">__gettimeofday</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">tv</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<a name="line-147"></a>    <span class="n">random_time_bits</span> <span class="o">=</span> <span class="p">((</span><span class="kt">uint64_t</span><span class="p">)</span> <span class="n">tv</span><span class="p">.</span><span class="n">tv_usec</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">^</span> <span class="n">tv</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">;</span>
<a name="line-148"></a>  <span class="p">}</span>
<a name="line-149"></a><span class="cp"># else</span>
<a name="line-150"></a>  <span class="n">random_time_bits</span> <span class="o">=</span> <span class="n">time</span> <span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
<a name="line-151"></a><span class="cp"># endif</span>
<a name="line-152"></a><span class="cp">#endif</span>
<a name="line-153"></a>  <span class="n">value</span> <span class="o">+=</span> <span class="n">random_time_bits</span> <span class="o">^</span> <span class="n">__getpid</span> <span class="p">();</span>
<a name="line-154"></a>
<a name="line-155"></a>  <span class="k">for</span> <span class="p">(</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">TMP_MAX</span><span class="p">;</span> <span class="n">value</span> <span class="o">+=</span> <span class="mi">7777</span><span class="p">,</span> <span class="o">++</span><span class="n">count</span><span class="p">)</span>
<a name="line-156"></a>    <span class="p">{</span>
<a name="line-157"></a><span class="hll">      <span class="kt">uint64_t</span> <span class="n">v</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span><span class='error2'>&lt;--- Skipping configuration 'UINT64_MAX;uint64_t' since the value of 'uint64_t' is unknown. Use -D if you want to check it. You can use -U to skip it explicitly.</span>
</span><a name="line-158"></a>
<a name="line-159"></a>      <span class="cm">/* Fill in the random bits.  */</span>
<a name="line-160"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-161"></a>      <span class="n">v</span> <span class="o">/=</span> <span class="mi">62</span><span class="p">;</span>
<a name="line-162"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-163"></a>      <span class="n">v</span> <span class="o">/=</span> <span class="mi">62</span><span class="p">;</span>
<a name="line-164"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-165"></a>      <span class="n">v</span> <span class="o">/=</span> <span class="mi">62</span><span class="p">;</span>
<a name="line-166"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-167"></a>      <span class="n">v</span> <span class="o">/=</span> <span class="mi">62</span><span class="p">;</span>
<a name="line-168"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-169"></a>      <span class="n">v</span> <span class="o">/=</span> <span class="mi">62</span><span class="p">;</span>
<a name="line-170"></a>      <span class="n">XXXXXX</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">letters</span><span class="p">[</span><span class="n">v</span> <span class="o">%</span> <span class="mi">62</span><span class="p">];</span>
<a name="line-171"></a>
<a name="line-172"></a>      <span class="n">fd</span> <span class="o">=</span> <span class="n">__mkdir</span> <span class="p">(</span><span class="n">tmpl</span><span class="p">,</span> <span class="n">S_IRUSR</span> <span class="o">|</span> <span class="n">S_IWUSR</span> <span class="o">|</span> <span class="n">S_IXUSR</span><span class="p">);</span>
<a name="line-173"></a>
<a name="line-174"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-175"></a>	<span class="p">{</span>
<a name="line-176"></a>	  <span class="n">__set_errno</span> <span class="p">(</span><span class="n">save_errno</span><span class="p">);</span>
<a name="line-177"></a>	  <span class="k">return</span> <span class="n">fd</span><span class="p">;</span>
<a name="line-178"></a>	<span class="p">}</span>
<a name="line-179"></a>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">EEXIST</span><span class="p">)</span>
<a name="line-180"></a>	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a name="line-181"></a>    <span class="p">}</span>
<a name="line-182"></a>
<a name="line-183"></a>  <span class="cm">/* We got out of the loop because we ran out of combinations to try.  */</span>
<a name="line-184"></a>  <span class="n">__set_errno</span> <span class="p">(</span><span class="n">EEXIST</span><span class="p">);</span>
<a name="line-185"></a>  <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a name="line-186"></a><span class="p">}</span>
<a name="line-187"></a>
<a name="line-188"></a><span class="cm">/* Generate a unique temporary directory from TEMPLATE.</span>
<a name="line-189"></a><span class="cm">   The last six characters of TEMPLATE must be &quot;XXXXXX&quot;;</span>
<a name="line-190"></a><span class="cm">   they are replaced with a string that makes the filename unique.</span>
<a name="line-191"></a><span class="cm">   The directory is created, mode 700, and its name is returned.</span>
<a name="line-192"></a><span class="cm">   (This function comes from OpenBSD.) */</span>
<a name="line-193"></a><span class="kt">char</span> <span class="o">*</span>
<a name="line-194"></a><span class="n">mkdtemp</span> <span class="p">(</span><span class="n">template</span><span class="p">)</span>
<a name="line-195"></a>     <span class="kt">char</span> <span class="o">*</span><span class="n">template</span><span class="p">;</span>
<a name="line-196"></a><span class="p">{</span>
<a name="line-197"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">gen_tempname</span> <span class="p">(</span><span class="n">template</span><span class="p">))</span>
<a name="line-198"></a>    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<a name="line-199"></a>  <span class="k">else</span>
<a name="line-200"></a>    <span class="k">return</span> <span class="n">template</span><span class="p">;</span>
<a name="line-201"></a><span class="p">}</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.87 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
